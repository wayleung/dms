<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>宿舍管理系统</title>

<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="font-awesome/css/font-awesome.css" rel="stylesheet">



<link href="css/animate.css" rel="stylesheet">
<link href="css/style.css" rel="stylesheet">
<link href="lib/datepicker3.css" rel="stylesheet">


<style>
.nav>li.active {
	border-left: 4px solid #d31145;
	background: #293846;
}

.pg-input {
	float: left;
	height: 28px;
	width: 60px;
	font-size: 14px;
	background-color: #FFFFFF;
	background-image: none;
	border: 1px solid #e5e6e7;
	padding-left: 20px;
	margin-left: 20px;
}

.pg-go-btn {
	height: 28px;
	border-radius: 0px;
}

.font16 {
	font-size: 16px;
}

.green {
	color: #18a689;
}
</style>

</head>

<body>
	<div id="wrapper">
		<include src="nav.html"></include>

		<div id="page-wrapper" class="gray-bg dashbard-1">
			<include src="headbar.html"></include>

			<div class="row">

				<div class="col-lg-12">
					<div class="row wrapper border-bottom white-bg page-heading">
						<div class="col-lg-10">
							<h2>宿舍管理</h2>
							<ol class="breadcrumb">
								<li><a href="index.html">首页</a></li>
								<li class="active"><strong>宿舍水电费缴费管理</strong></li>
							</ol>
						</div>
						<div class="col-lg-2"></div>
					</div>
					<div class="wrapper wrapper-content animated fadeInRight">
						<div class="row">

							<div class="col-lg-12">
								<div class="ibox float-e-margins">
									<div class="ibox-title">
										<h5>所有水电费缴费号</h5>
										
										<div class="ibox-tools">
											宿舍号
											<input id="feeInput" type="text" /><a onclick="queryFeeByDormNum()" class=""> <i class="fa fa-search green font16"></i>
											</a> <a class="collapse-link"> <i
												class="fa fa-chevron-up  font16"></i>
											</a>
										</div>
										<!-- <span class="label label-primary pull-right">NEW<i class="fa fa-plus"></i></span>
                            <button type="button" class="btn btn-md btn-primary"><i class="fa fa-plus"></i></button> -->
									</div>

									<div class="ibox-content" style="display: block;">
										<div class="row">
											<div class="col-sm-3">
												<div class="input-group pull-right">
													<span class="input-group-btn">
														<button type="button" class="btn btn-sm btn-primary"
															data-toggle="modal" data-target="#addModal">
															<i class="fa fa-plus"></i>增加
														</button>
														
														
													</span>
												</div>
											</div>
										</div>
										<div class="table-responsive">
											<div class="sk-spinner sk-spinner-fading-circle"
												style="display: none">
												<div class="sk-circle1 sk-circle"></div>
												<div class="sk-circle2 sk-circle"></div>
												<div class="sk-circle3 sk-circle"></div>
												<div class="sk-circle4 sk-circle"></div>
												<div class="sk-circle5 sk-circle"></div>
												<div class="sk-circle6 sk-circle"></div>
												<div class="sk-circle7 sk-circle"></div>
												<div class="sk-circle8 sk-circle"></div>
												<div class="sk-circle9 sk-circle"></div>
												<div class="sk-circle10 sk-circle"></div>
												<div class="sk-circle11 sk-circle"></div>
												<div class="sk-circle12 sk-circle"></div>
											</div>


											<table class="table table-striped">
												<thead>
													<tr>
														<th>水电费编号</th>
														<th>宿舍号</th>
														<th>应缴电费</th>
														<th>应缴水费</th>
														<th>创建时间</th>
														<th>缴费时间</th>
														<th>截止时间</th>
														<th>状态</th>
														<th>备注</th>
														<th>操作</th>
													</tr>
												</thead>
												<p id="msg" style="color: red;"></p>
												
												<tbody id="result">
													
												</tbody>
											</table>
											
											
											<div class="pull-right">
												<ul class="pagination">
													<li><span id="prevPage" onclick="prevPage()" >上一页</span></li>
													<li><span id="pageNum" ></span></li>
													<li><span href="#">/</span></li>
													<li><span id="pages" ></span></li>
													<li><span id="nextPage" onclick="nextPage()">下一页</span></li>

													<!-- <li><input type="text" class="pg-input">
													<li>
													<li><button type="button"
															class="btn btn-sm btn-primary pg-go-btn">转到</button></li> -->
												</ul>
											</div>
										</div>

									</div>
								</div>
							</div>

						</div>
					</div>

					<include src="footer.html"></include>
				</div>
			</div>

		</div>

	</div>

	<div class="modal inmodal" id="addModal" tabindex="-1" role="dialog"
		aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content animated bounceInRight">
				<!-- <button type="button" class="close" data-dismiss="modal">
					<span aria-hidden="true">Ã</span><span class="sr-only">Close</span>
				</button> -->
				<div class="row">
					<div class="col-lg-12">
						<button type="button" class="close" data-dismiss="modal">
							<!-- <span aria-hidden="true">x</span><span class="sr-only">Close</span> -->
						</button>
						<div class="ibox float-e-margins">
							<div class="ibox-content">
								<form id="add_form" method="post" class="form-horizontal">

								
									<div class="form-group">
										<label class="col-sm-2 control-label">宿舍号</label>

                                    	<div class="col-sm-10">
											<input type="text" class="form-control"
												id="dormNum" name="dormNum">
										</div>
									</div>
									

									
									
									<div class="form-group">
										<label class="col-sm-2 control-label">应缴电费</label>

                                    	<div class="col-sm-10">
											<input type="text" class="form-control"
												id="electricityFee" name="electricityFee">
										</div>
									</div>
									
									
									<div class="form-group">
										<label class="col-sm-2 control-label">应缴水费</label>

                                    	<div class="col-sm-10">
											<input type="text" class="form-control"
												id="waterFee" name="waterFee">
										</div>
									</div>
									
									

									
									
									<div class="form-group" id="data_1">
										<label class="col-sm-2 control-label">截止时间</label>

										<div class="col-sm-10">
											<div class="input-group date">
												<span class="input-group-addon"><i
													class="fa fa-calendar"></i></span><input type="text"
													class="form-control" id="endTime" name="endTime">
											</div>
										</div>
									</div>
									
									
									
										<div class="form-group" id="data_2">
										<label class="col-sm-2 control-label">缴费时间</label>

										<div class="col-sm-10">
											<div class="input-group date">
												<span class="input-group-addon"><i
													class="fa fa-calendar"></i></span><input type="text"
													class="form-control" id="payTime" name="payTime">
											</div>
										</div>
									</div>
									
																		
									<div class="form-group">
										<label class="col-sm-2 control-label">状态</label>

										<div class="col-sm-10">
											<select class="form-control" id="status" name="status">
                                        	<option value="未缴费">未缴费</option>
                                        	<option value="已缴费">已缴费</option>
                                        	<!-- <option value="0">delete</option> -->
                                    		</select>
										</div>
									</div>
									
									

									
									<div class="form-group">
										<label class="col-sm-2 control-label">备注</label>

										<div class="col-sm-10">
											<input type="text" class="form-control"
												id="remark" name="remark">
										</div>
									</div>

									<p id="msg_insert" style="color: red;"></p>

									

									<div class="hr-line-dashed"></div>
									<div class="form-group">
									<div class="col-sm-1 col-sm-offset-1"></div>
										<div class="col-sm-6 col-sm-offset-2">
											<button class="btn btn-white" type="button"
												data-dismiss="modal">取消</button>
											<button class="btn btn-primary" type="button"
												onclick="insertFee()">保存</button>
										</div>
										
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="modal inmodal" id="updateModal" tabindex="-1" role="dialog"
		aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content animated bounceInRight">

				<div class="row">
					<div class="col-lg-12">
 						<button type="button" class="close" data-dismiss="modal">
<!-- 							<span aria-hidden="true">x</span><span class="sr-only">Close</span> -->
						</button>
						<div class="ibox float-e-margins">
							<div class="ibox-content">
								<form id="update_form" method="post" class="form-horizontal">

									<div class="form-group">
										<label class="col-sm-2 control-label">水电费编号</label>

                                    	<div class="col-sm-10">
											<input type="text" class="form-control"
												id="fId_update" name="fId_update">
										</div>
									</div>
								
								
									<div class="form-group">
										<label class="col-sm-2 control-label">宿舍号</label>

                                    	<div class="col-sm-10">
											<input type="text" class="form-control"
												id="dormNum_update" name="dormNum_update">
										</div>
									</div>
									

									
									
									<div class="form-group">
										<label class="col-sm-2 control-label">应缴电费</label>

                                    	<div class="col-sm-10">
											<input type="text" class="form-control"
												id="electricityFee_update" name="electricityFee_update">
										</div>
									</div>
									
									
									<div class="form-group">
										<label class="col-sm-2 control-label">应缴水费</label>

                                    	<div class="col-sm-10">
											<input type="text" class="form-control"
												id="waterFee_update" name="waterFee_update">
										</div>
									</div>
									
									

									
									
									<div class="form-group" id="data_1">
										<label class="col-sm-2 control-label">截止时间</label>

										<div class="col-sm-10">
											<div class="input-group date">
												<span class="input-group-addon"><i
													class="fa fa-calendar"></i></span><input type="text"
													class="form-control" id="endTime_update" name="endTime_update">
											</div>
										</div>
									</div>
									
									
									
										<div class="form-group" id="data_2">
										<label class="col-sm-2 control-label">缴费时间</label>

										<div class="col-sm-10">
											<div class="input-group date">
												<span class="input-group-addon"><i
													class="fa fa-calendar"></i></span><input type="text"
													class="form-control" id="payTime_update" name="payTime_update">
											</div>
										</div>
									</div>
									
																		
									<div class="form-group">
										<label class="col-sm-2 control-label">状态</label>

										<div class="col-sm-10">
											<select class="form-control" id="status_update" name="status_update">
                                        	<option value="未缴费">未缴费</option>
                                        	<option value="已缴费">已缴费</option>
                                        	<!-- <option value="0">delete</option> -->
                                    		</select>
										</div>
									</div>
									
									

									
									<div class="form-group">
										<label class="col-sm-2 control-label">备注</label>

										<div class="col-sm-10">
											<input type="text" class="form-control"
												id="remark_update" name="remark_update">
										</div>
									</div>

									
									
									
									<div class="hr-line-dashed"></div>
									<div class="form-group">
									<div class="col-sm-1 col-sm-offset-1"></div>
										<div class="col-sm-6 col-sm-offset-2">
											<button class="btn btn-white" type="button"
												data-dismiss="modal">取消</button>
											<button class="btn btn-primary" type="button"
												onclick="updateFee()">保存更新</button>
										</div>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>


	<!-- Mainly scripts -->
	<script src="js/jquery-2.1.1.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/plugins/metisMenu/jquery.metisMenu.js"></script>
	<script src="js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

	<!-- Custom and plugin javascript -->
	<script src="js/inspinia.js"></script>
	<script src="js/plugins/pace/pace.min.js"></script>
	<script src="lib/bootstrap-datepicker.js"></script>

	<script type="text/javascript">
	
	
    /*
     * 删除元素子节点以及内容
     */
    function deleteAll(id){
    	$('#'+id).empty();
    } 
     
     
    function addMsg(id,msg){
    	$('#'+id).text(msg);
    }
    
	
	
		$('#data_1 .input-group.date').datepicker({
			todayBtn : "linked",
			keyboardNavigation : false,
			forceParse : false,
			calendarWeeks : true,
			autoclose : true
		});

		$('#data_2 .input-group.date').datepicker({
			todayBtn : "linked",
			keyboardNavigation : false,
			forceParse : false,
			calendarWeeks : true,
			autoclose : true
		});

		$('#data_3 .input-group.date').datepicker({
			todayBtn : "linked",
			keyboardNavigation : false,
			forceParse : false,
			calendarWeeks : true,
			autoclose : true
		});

		$('#data_4 .input-group.date').datepicker({
			todayBtn : "linked",
			keyboardNavigation : false,
			forceParse : false,
			calendarWeeks : true,
			autoclose : true
		});

		function getHostPath() {
			var curWwwPath = window.document.location.href;
			var pathName = window.document.location.pathname;
			var pos = curWwwPath.indexOf(pathName);
			//获取主机地址，如： http://localhost:8083
			var localhostPath = curWwwPath.substring(0, pos);
			return localhostPath;
		}

		var rootPath = getHostPath() + "/" + "dms/";
		/* 			  $(document).ready(function(){
		 console.log(rootPath); 
		 }); */

		function insertFee() {
			var url = rootPath + "insertFee";


			var dormNum = $("#dormNum").val();
			var electricityFee = $("#electricityFee").val();
			var waterFee = $("#waterFee").val();
			var payTime = $("#payTime").val();
			var endTime = $("#endTime").val();
			var status = $("#status").val();
			var remark = $("#remark").val();
			

				if (dormNum != null && dormNum != ""
					/* && dormNum != null && dormNum != ""
					&& electricityFee != null && electricityFee != ""
					&& waterFee != null && waterFee != ""
					&& headId != null && headId != ""
					&& createTime != null && createTime != ""
					&& status != null && status != ""
					&& remark != null && remark != "" */) {
				var json = {
					"dormNum" : dormNum,
					"electricityFee" : electricityFee,
					"waterFee" : waterFee,
					"payTime" : payTime,
					"endTime" : endTime,
					"status" : status,
					"remark" : remark
				};

				console.log(url);
				$.ajax({
					url : url,
					type : "post",
					async : true,
					data : json,
					success : function(datas) {
						var map_json = jQuery.parseJSON(datas);
						//alert(map_json);
						if(map_json.success==0){
							deleteAll('msg_insert');
							addMsg('msg_insert',map_json.msg_insert);
							}
						else{
							window.location.reload();
						}
						}
				});
			}else{
				addMsg('msg_insert','宿舍号不能为空');
			}

				
		}

		function fillUpdateForm(fId, dormNum, electricityFee,waterFee,payTime,endTime,status,remark) {
			$("#fId_update").val(fId);
			$("#dormNum_update").val(dormNum);
			$("#electricityFee_update").val(electricityFee);
			$("#waterFee_update").val(waterFee);
			$("#payTime_update").val(payTime);
			$("#endTime_update").val(endTime);
			$("#status_update").val(status);
			$("#remark_update").val(remark);
		}

		function updateFee() {
			var url = rootPath + "updateFee";
			
			var fId = $("#fId_update").val();
			var dormNum = $("#dormNum_update").val();
			var electricityFee = $("#electricityFee_update").val();
			var waterFee = $("#waterFee_update").val();
			var payTime_update = $("#payTime_update").val();
			var endTime_update = $("#endTime_update").val();
			var status = $("#status_update").val();
			var remark = $("#remark_update").val();

				if (fId != null && fId != ""
					&& dormNum != null && dormNum != ""
					/*&& electricityFee != null && electricityFee != ""
					&& waterFee != null && waterFee != ""
					&& headId != null && headId != ""
					&& createTime != null && createTime != ""
					&& status != null && status != ""
					&& remark != null && remark != "" */) {

				var json = {
					"fId_update" : fId,
					"dormNum_update" : dormNum,
					"electricityFee_update" : electricityFee,
					"waterFee_update" : waterFee,
					"payTime_update" : payTime_update,
					"endTime_update" : endTime_update,
					"status_update" : status,
					"remark_update" : remark
				};

				console.log(url);
				$.ajax({
					url : url,
					type : "post",
					async : true,
					data : json,
				});
			}
				window.location.reload();
		}

		function deleteFeeById(id) {
			var url = rootPath + "deleteFee";
			var json = {
				"id" : id,
			};

			console.log(url);
			$.ajax({
				url : url,
				type : "post",
				async : true,
				data : json,
			});
			window.location.reload();
		}
		
		
		function queryFeeByDormNum(){
			var dorm_num = $('#feeInput').val();
			var url = rootPath + "queryFeeByDormNum";
			$
			.ajax({
				url : url,
				type : "post",
				async : true,
				dataType : "json",
				data: {'dorm_num':dorm_num},
				//异步   注意数据的获取
				success : function(map_json) {
					//alert(map_json);
					var list_json = map_json.feeList;
					var ul;
					if(list_json!=null){
						deleteAll('result');
						deleteAll('msg');
						var ul;
						$
						.each(
								list_json,
								function(i, n) {
									//获取对象中属性为optionsValue的值 
										ul += "<tr>"
											+ "<td>"
											+ list_json[i].fId
											+ "</td>"
											+ "<td>"
											+ list_json[i].dormNum
											+ "</td>"
											+ "<td>"
											+ list_json[i].electricityFee
											+ "</td>"
											+ "<td>"
											+ list_json[i].waterFee
											+ "</td>"

											+ "<td>"
											+ list_json[i].createTime
											+ "</td>"
											
											+ "<td>"
											+ list_json[i].payTime
											+ "</td>"
											
											+ "<td>"
											+ list_json[i].endTime
											+ "</td>"
											
											+ "<td>"
											+ list_json[i].status
											+ "</td>"
											+ "<td>"
											+ list_json[i].remark
											+ "</td>"
											+ "<td><a href='#' data-toggle='modal' data-target='#updateModal' onclick='fillUpdateForm(\""
											+ list_json[i].fId
											+ "\",\""
											+ list_json[i].dormNum
											+ "\",\""
											+ list_json[i].electricityFee
											+ "\",\""
											+ list_json[i].waterFee
											+ "\",\""
											+ list_json[i].payTime
											+ "\",\""
											+ list_json[i].endTime
											+ "\",\""
											+ list_json[i].status
											+ "\",\""
											+ list_json[i].remark
											+ "\")'>更新</a>&nbsp;&nbsp;&nbsp;<a href='#' onclick='deleteFeeById("
											+ list_json[i].feeId
											+ ")'>删除</a></td>"
											+ "</tr>";
									
									
								});
									
						//ul+="</ul>"; 
						$('#result').append(ul);
					}else{
						deleteAll('result');
						addMsg('msg',map_json.msg)
					}
					
				}
			});
		}


		//返回地址栏参数
		function GetQueryString(name)
		{
	     var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
	     var r = window.location.search.substr(1).match(reg);
	     if(r!=null)return  unescape(r[2]); return null;
		}

		
		
		//function ajax(api,datas) {
		$(document)
				.ready(
						function() {
							
							var currentPage = GetQueryString('currentPage');
							
							console.log(currentPage);
							if(currentPage!=null&&currentPage!=''){
								var url = rootPath + "queryAllFees?currentPage="+currentPage;
							}else{
								var url = rootPath + "queryAllFees";
							}
							
							
							
							
							
							console.log(url);
							$
									.ajax({
										url : url,
										type : "get",
										async : true,
										dataType : "json",
										//data: datas,
										//异步   注意数据的获取
										success : function(map_json) {
											//alert(map_json);
											var list_json = map_json.feeList.list;
											var ul;
											$
													.each(
															list_json,
															function(i, n) {
																//获取对象中属性为optionsValue的值 
																	ul += "<tr>"
																		+ "<td>"
																		+ list_json[i].fId
																		+ "</td>"
																		+ "<td>"
																		+ list_json[i].dormNum
																		+ "</td>"
																		+ "<td>"
																		+ list_json[i].electricityFee
																		+ "</td>"
																		+ "<td>"
																		+ list_json[i].waterFee
																		+ "</td>"

																		+ "<td>"
																		+ list_json[i].createTime
																		+ "</td>"
																		
																		+ "<td>"
																		+ list_json[i].payTime
																		+ "</td>"
																		
																		+ "<td>"
																		+ list_json[i].endTime
																		+ "</td>"
																		
																		+ "<td>"
																		+ list_json[i].status
																		+ "</td>"
																		+ "<td>"
																		+ list_json[i].remark
																		+ "</td>"
																		+ "<td><a href='#' data-toggle='modal' data-target='#updateModal' onclick='fillUpdateForm(\""
																		+ list_json[i].fId
																		+ "\",\""
																		+ list_json[i].dormNum
																		+ "\",\""
																		+ list_json[i].electricityFee
																		+ "\",\""
																		+ list_json[i].waterFee
																		+ "\",\""


																		+ list_json[i].payTime
																		+ "\",\""
																		+ list_json[i].endTime
																		+ "\",\""
																		+ list_json[i].status
																		+ "\",\""
																		
																		
																		+ list_json[i].remark
																		+ "\")'>更新</a>&nbsp;&nbsp;&nbsp;<a href='#' onclick='deleteFeeById("
																		+ list_json[i].fId
																		+ ")'>删除</a></td>"
																		+ "</tr>";
																
																
															});
											//ul+="</ul>"; 
											$('#result').append(ul);
											
											//分页
											$('#pageNum').text(map_json.feeList.pageNum);
											$('#pages').text(map_json.feeList.pages);
										}
									});
						});
		//}
		
		
//分页
		
		
		
		
		
		function nextPage(){
			
			var currentPage = GetQueryString('currentPage');
			
			console.log(currentPage);
			if(currentPage!=null&&currentPage!=''){
				var url = rootPath + "queryAllFees?currentPage="+currentPage;
			}else{
				var url = rootPath + "queryAllFees";
			}
			
			
			console.log(url);
			$.ajax({
						url : url,
						type : "get",
						async : true,
						dataType : "json",
						//data: datas,
						//异步   注意数据的获取
						success : function(data) {
							/* user_vm.datas=data.datas; */
							//总页数
							var pages = data.feeList.pages;
							//现在页码
							var pageNum = data.feeList.pageNum;
							console.log('pages'+pages+' pageNum'+pageNum);
							if(currentPage+1>0&&pageNum<pages){
								
								window.location.replace(rootPath + "admin/fee_manage.html?currentPage="+(pageNum+1)); 
							
								
							}
							
							
						}
				 	}); 
		}
		
		function prevPage(){
			var currentPage = GetQueryString('currentPage');
			
			console.log(currentPage);
			if(currentPage!=null&&currentPage!=''){
				var url = rootPath + "queryAllFees?currentPage="+currentPage;
			}else{
				var url = rootPath + "queryAllFees";
			}
			console.log(url);
			$.ajax({
						url : url,
						type : "get",
						async : true,
						dataType : "json",
						//data: datas,
						//异步   注意数据的获取
						success : function(data) {
							/* user_vm.datas=data.datas; */
							//总页数
							var pages = data.feeList.pages;
							//现在页码
							var pageNum = data.feeList.pageNum;
							console.log('pages'+pages+' pageNum'+pageNum);
							if((pageNum-1)>=1&&pageNum<=pages){
								
								window.location.replace(rootPath + "admin/fee_manage.html?currentPage="+(pageNum-1));
							
								
							}
							
							
						}
				 	}); 
		}
		

		
		
		
		/** 
		 * include页面方法
		 */  
		(function(window, document, undefined) {  
		    var Include39485748323 = function() {}  
		    Include39485748323.prototype = {  
		        //倒序循环  
		        forEach: function(array, callback) {  
		            var size = array.length;  
		            for(var i = size - 1; i >= 0; i--){  
		                callback.apply(array[i], [i]);  
		            }  
		        },  
		        getFilePath: function() {  
		            var curWwwPath=window.document.location.href;  
		            var pathName=window.document.location.pathname;  
		            var localhostPaht=curWwwPath.substring(0,curWwwPath.indexOf(pathName));  
		            var projectName=pathName.substring(0,pathName.substr(1).lastIndexOf('/')+1);  
		            return localhostPaht+projectName;  
		        },  
		        //获取文件内容  
		        getFileContent: function(url) {  
		            var ie = navigator.userAgent.indexOf('MSIE') > 0;  
		            var o = ie ? new ActiveXObject('Microsoft.XMLHTTP') : new XMLHttpRequest();  
		            o.open('get', url, false);  
		            o.send(null);  
		            return o.responseText;  
		        },  
		        parseNode: function(content) {  
		            var objE = document.createElement("div");  
		            objE.innerHTML = content;  
		            return objE.childNodes;  
		        },  
		        executeScript: function(content) {  
		            var mac = /<script>([\s\S]*?)<\/script>/g;  
		            var r = "";  
		            while(r = mac.exec(content)) {  
		                eval(r[1]);  
		            }  
		        },  
		        getHtml: function(content) {  
		            var mac = /<script>([\s\S]*?)<\/script>/g;  
		            content.replace(mac, "");  
		            return content;  
		        },  
		        getPrevCount: function(src) {  
		            var mac = /\.\.\//g;  
		            var count = 0;  
		            while(mac.exec(src)) {  
		                count++;  
		            }  
		            return count;  
		        },  
		        getRequestUrl: function(filePath, src) {  
		            if(/http:\/\//g.test(src)){ return src; }  
		            var prevCount = this.getPrevCount(src);  
		            while(prevCount--) {  
		                filePath = filePath.substring(0,filePath.substr(1).lastIndexOf('/')+1);  
		            }  
		            return filePath + "/"+src.replace(/\.\.\//g, "");  
		        },  
		        replaceIncludeElements: function() {  
		            var $this = this;  
		            var filePath = $this.getFilePath();  
		            var includeTals = document.getElementsByTagName("include");  
		            this.forEach(includeTals, function() {  
		                //拿到路径  
		                var src = this.getAttribute("src");  
		                //拿到文件内容  
		                var content = $this.getFileContent($this.getRequestUrl(filePath, src));  
		                //将文本转换成节点  
		                var parent = this.parentNode;  
		                var includeNodes = $this.parseNode($this.getHtml(content));  
		                var size = includeNodes.length;  
		                for(var i = 0; i < size; i++) {  
		                    parent.insertBefore(includeNodes[0], this);  
		                }  
		                //执行文本中的额javascript  
		                $this.executeScript(content);  
		                parent.removeChild(this);  
		                //替换元素 this.parentNode.replaceChild(includeNodes[1], this);  
		            })  
		        }  
		    }  
		    window.onload = function() {  
		        new Include39485748323().replaceIncludeElements();  
		    }  
		})(window, document) 
		
		
	</script>


	<!-- jQuery UI 
    <script src="js/plugins/jquery-ui/jquery-ui.min.js"></script>-->
</body>
</html>
